#!/bin/sh
#
# POSIX shell script to install an entire Linux desktop environment
# into the $HOME directory.
#
# Tested with both dash and bash.
#

scriptName=dfInstall
gitRepo="${DOTFILE_GIT_REPO:=$HOME/devel/dotfiles}"

cd "$gitRepo" || {
   printf '\n%s: Error - failed to cd into "%s"\n' "$scriptName" "$gitRepo"
   return 1
}

## Parse cmdline arguments and source functions
switch=''
. bin/.setup.sh

## Install dotfiles
ensure_dir "$XDG_CONFIG_HOME"
chmod 0755 "$XDG_CONFIG_HOME"

# Boldly install configuration files in parallel
( . fish-env/fishInstall ) &
( . nvim-env/nvimInstall ) &
( . home-env/homeInstall ) &
( . sway-env/swayInstall ) &

# Make sure all background jobs finish
wait
